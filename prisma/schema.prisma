generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ProjectStatus {
  EM_DESENVOLVIMENTO
  CONCLUIDO
  ARQUIVADO
}

model Project {
  id           Int                      @id @default(autoincrement())
  title        String
  description  String
  linkRepo     String
  linkDemo     String
  projectDate  DateTime
  createdAt    DateTime                 @default(now())
  proposito    String?
  aprendizados String[]
  media_principal_url String?
  status       ProjectStatus @default(EM_DESENVOLVIMENTO)
  images       Image[]
  technologies TechnologiesOnProjects[]
}

model Image {
  id        Int     @id @default(autoincrement())
  url       String
  altText   String?
  projectId Int
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)
}

model Technology {
  id       Int                      @id @default(autoincrement())
  name     String                   @unique
  icon     String?
  color    String?
  category String?
  projects TechnologiesOnProjects[]
  showInPortfolio Boolean @default(true)
}

model TechnologiesOnProjects {
  projectId    Int
  technologyId Int
  project      Project    @relation(fields: [projectId], references: [id], onDelete: Cascade)
  technology   Technology @relation(fields: [technologyId], references: [id], onDelete: Cascade)

  @@id([projectId, technologyId])
}

model MensagemContato {
  id          Int       @id @default(autoincrement())
  nome        String
  email       String
  mensagem    String
  lida        Boolean   @default(false)
  enviadaEm   DateTime  @default(now())
}

model User {
  id             Int      @id @default(autoincrement())
  email          String   @unique
  passwordHash   String
  role           String   @default("USER") 
  createdAt      DateTime @default(now())
}
